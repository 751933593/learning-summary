### 红黑树

https://mp.weixin.qq.com/s/L7IJskad0W5uiSVnk8DYrA

#### 1.红黑树的定义和性质

红黑树是一种含有红黑结点并能自平衡的二叉搜索树。

为了保证平衡，红黑树必须满足以下性质：

- 每个结点是要么是红色或黑色
- 根结点必须是黑色
- 叶结点（外部结点、空结点）是黑色
- 红色结点不能连续（也就是，红色结点的孩子和父亲都是黑色）
- 对于每个结点，从该点至 nil（树尾端，Java 中为 null 的结点）的任何路径都包含所相同个数的黑色结点

#### 2.旋转

左旋： 左旋指的是以某个结点作为支点（旋转结点），其右子结点变为旋转结点的父结点，右子结点的左子结点变为旋转结点的右子结点，左子结点保持不变。 

右旋： 右旋指的是以某个结点作为支点（旋转结点），其左子结点变为旋转结点的父结点，左子结点的右子结点变为旋转结点的左子结点，右子结点保持不变。 

#### 3.插入场景

插入时，每个插入的结点都设置为红色

场景1：红黑树为空树

处理：直接将结点设置为黑色，并作为根结点

场景2：插入结点的值已存在

处理：放弃本次插入

场景3：插入结点的父结点是黑色

处理：直接插入

场景4：插入结点的父结点是红色

场景4.1：插入结点存在叔父结点，且叔父结点是红色

处理：将叔父结点和父结点变为黑色，祖父结点变成红色，**将祖父结点设为当前插入结点**

- N-node：当前结点
- P-parent：父结点
- S-sibling：兄弟结点
- U-uncle：叔父结点（P 的兄弟结点）
- G-grand：祖父结点（P 的父结点）

场景4.2：插入结点不存在叔父结点，或叔父结点是黑色，插入结点的父结点是祖父结点的左子结点

场景4.2.1：插入结点是父结点的左子结点

处理：将父结点变为黑色，祖父结点变为红色，祖父结点右旋

场景4.2.2：插入结点是父结点的右子结点

处理：将父节点左旋，将父节点设为当前插入结点，进行场景4.2.1的处理

场景4.3：插入结点不存在叔父结点，或叔父结点是黑色，插入结点的父结点是祖父结点的右子结点

场景4.3.1：插入结点是父结点的右子结点

处理：将父结点变为黑色，祖父结点变为红色，祖父结点左旋

场景4.3.2：插入结点是父结点的左子结点

处理：将父节点右旋，将父节点设为当前插入结点，进行场景4.3.1的处理

#### 4.删除场景

